var _all_provinces;var _all_cities={};var _all_mandarin_cert;var _my_information;var _all_nations;var _all_college_cert;var _all_degree_cert;var _all_student;var _all_score;var _all_cert_type;var _dict_polity;var _dict_occupation;var _dict_data={};var _all_certificate_org={};var _all_subject={};var _all_local_set={};function clear_data(){_all_provinces=null;set_all_provinces(null);clear_my_information();clear_all_mandarin();clear_all_city();clear_all_nation();clear_all_college();clear_all_degree();clear_all_score();clear_all_student();clear_all_cert_type();clear_dict_polity();clear_dict_occupation();clear_all_certificate_org();clear_dict_data();clear_all_local()}function clear_all_local(){_all_local=null;localStorage.removeItem("_all_local")}function clear_all_subject(){_all_subject=null;localStorage.removeItem("_all_subject")}function clear_dict_data(){_dict_data=null;localStorage.removeItem("_dict_data")}function clear_all_certificate_org(){_all_certificate_org=null;localStorage.removeItem("_all_certificate_org")}function clear_dict_occupation(){_dict_occupation=null;localStorage.removeItem("_dict_occupation")}function clear_dict_polity(){_dict_polity=null;localStorage.removeItem("_dict_polity")}function clear_all_cert_type(){_all_cert_type=null;localStorage.removeItem("_all_cert_type")}function clear_all_student(){_all_student=null;localStorage.removeItem("_all_student")}function clear_all_city(){_all_city={};localStorage.removeItem("_all_city")}function clear_all_nation(){_all_nation=null;localStorage.removeItem("_all_nation")}function clear_all_college(){_all_college=null;localStorage.removeItem("_all_college")}function clear_all_degree(){_all_degree=null;localStorage.removeItem("_all_degree")}function clear_all_score(){_all_score=null;localStorage.removeItem("_all_score")}function set_all_provinces(data){_all_provinces=data;localStorage.setItem("_all_province",JSON.stringify(data))}function get_all_provinces(){if(_all_provinces){return _all_provinces}var ret=JSON.parse(localStorage.getItem("_all_province"));if(ret){_all_provinces=ret}return ret}function set_my_information(data){_my_information=data;localStorage.setItem("_my_information",JSON.stringify(data))}function get_my_information(){if(_my_information){return _my_information}var ret=JSON.parse(localStorage.getItem("_my_information"));if(ret){_my_information=ret}return ret}function clear_my_information(){_my_information=null;localStorage.removeItem("_my_information")}function set_all_mandarin(data){_all_mandarin_cert=data;localStorage.setItem("_all_mandarin_cert",JSON.stringify(data))}function get_all_mandarin(){if(_all_mandarin_cert){return _all_mandarin_cert}var ret=JSON.parse(localStorage.getItem("_all_mandarin_cert"));if(ret){_all_mandarin_cert=ret}return ret}function sync_mandarin_cert(id,cert){var records=get_all_mandarin();if(!records)return;for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==id){for(var x in cert){record[x]=cert[x]}break}}set_all_mandarin(records)}function sync_mandarin_cert_delete(id){var records=get_all_mandarin();if(!records)return;for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==id){records.splice(i,1);break}}set_all_mandarin(records)}function clear_all_mandarin(){_all_mandarin_cert=null;localStorage.setItem("_all_mandarin_cert",null)}function set_province_city(provinceId,cities){_all_cities[provinceId]=cities;localStorage.setItem("_all_city."+provinceId,JSON.stringify(cities))}function get_province_city(provinceId){if(_all_cities[provinceId]){return _all_cities[provinceId]}var ret=JSON.parse(localStorage.getItem("_all_city."+provinceId));if(ret){_all_cities[provinceId]=ret}return ret}function set_all_nation(data){_all_nations=data;localStorage.setItem("_all_nation",JSON.stringify(data))}function get_all_nation(){if(_all_nations){return _all_nations}var ret=JSON.parse(localStorage.getItem("_all_nation"));if(ret){_all_nations=ret}return ret}function set_all_college(data){_all_college_cert=data;localStorage.setItem("_all_college",JSON.stringify(data))}function get_all_college(){if(_all_college_cert){return _all_college_cert}var ret=JSON.parse(localStorage.getItem("_all_college"));if(ret){_all_college_cert=ret}return ret}function sync_college_cert(id,cert){var records=get_all_college();if(!records)return;for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==id){for(var x in cert){record[x]=cert[x]}break}}set_all_college(records)}function sync_college_cert_delete(id){var records=get_all_college();if(!records)return;for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==id){records.splice(i,1);break}}set_all_college(records)}function sync_degree_cert(id,cert){var records=get_all_degree();if(!records)return;for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==id){for(var x in cert){record[x]=cert[x]}break}}set_all_degree(records)}function sync_degree_cert_delete(id){var records=get_all_degree();if(!records)return;for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==id){records.splice(i,1);break}}set_all_degree(records)}function set_all_degree(data){_all_degree_cert=data;localStorage.setItem("_all_degree",JSON.stringify(data))}function get_all_degree(){if(_all_degree_cert){return _all_degree_cert}var ret=JSON.parse(localStorage.getItem("_all_degree"));if(ret){_all_degree_cert=ret}return ret}function set_all_student(data){_all_student=data;localStorage.setItem("_all_student",JSON.stringify(data))}function get_all_student(){if(_all_student){return _all_student}var ret=JSON.parse(localStorage.getItem("_all_student"));if(ret){_all_student=ret}return ret}function set_all_score(data){_all_score=data;localStorage.setItem("_all_score",JSON.stringify(data))}function get_all_score(){if(_all_score){return _all_score}var ret=JSON.parse(localStorage.getItem("_all_score"));if(ret){_all_score=ret}return ret}function set_all_cert_type(data){_all_cert_type=data;localStorage.setItem("_all_cert_type",JSON.stringify(data))}function get_all_cert_type(){if(_all_cert_type){return _all_cert_type}var ret=JSON.parse(localStorage.getItem("_all_cert_type"));if(ret){_all_cert_type=ret}return ret}function set_dict_polity(data){_dict_polity=data;localStorage.setItem("_dict_polity",JSON.stringify(data))}function get_dict_polity(){if(_dict_polity){return _dict_polity}var ret=JSON.parse(localStorage.getItem("_dict_polity"));if(ret){_dict_polity=ret}return ret}function set_dict_occupation(data){_dict_occupation=data;localStorage.setItem("_dict_occupation",JSON.stringify(data))}function get_dict_occupation(){if(_dict_occupation){return _dict_occupation}var ret=JSON.parse(localStorage.getItem("_dict_occupation"));if(ret){_dict_occupation=ret}return ret}function get_dictionary(type){if(_dict_data[type]){return _dict_data[type]}var ret=JSON.parse(localStorage.getItem("_dict_data."+type));if(ret){_dict_data[type]=ret}return ret}function set_dictionary(type,data){_dict_data[type]=data;localStorage.setItem("_dict_data."+type,JSON.stringify(data))}function update_teacher_storage(data){var teacher=JSON.parse(localStorage.teacher);if(data.name){teacher.realName=data.name}else if(data.realName){teacher.realName=data.realName}teacher.gender=data.gender;teacher.nationId=data.nationId;teacher.birthday=data.birthday;teacher.outerIdCardNum=data.outerIdCardNum;localStorage.teacher=JSON.stringify(teacher)}function get_all_certificate_org(provinceId,cityId,type,level){var key=provinceId+"_"+cityId+"_"+type+"_"+level;if(_all_certificate_org[key]){return _all_certificate_org[key]}var ret=JSON.parse(localStorage.getItem("_all_certificate_org."+key));if(ret){_all_certificate_org[key]=ret}return ret}function set_all_certificate_org(provinceId,cityId,type,level,data){var key=provinceId+"_"+cityId+"_"+type+"_"+level;_all_certificate_org[key]=data;localStorage.setItem("_all_certificate_org."+key,JSON.stringify(data))}function get_all_subject(provinceId,type){var key=provinceId+"_"+type;if(_all_subject[key]){return _all_subject[key]}var ret=JSON.parse(localStorage.getItem("_all_subject."+key));if(ret){_all_subject[key]=ret}return ret}function set_all_subject(provinceId,type,data){var key=provinceId+"_"+type;_all_subject[key]=data;localStorage.setItem("_all_subject."+key,JSON.stringify(data))}function get_all_local(orgId,type){var key=orgId+"_"+type;if(_all_subject[key]){return _all_subject[key]}var ret=JSON.parse(localStorage.getItem("_all_local."+key));if(ret){_all_subject[key]=ret}return ret}function set_all_local(orgId,type,data){var key=orgId+"_"+type;_all_subject[key]=data;localStorage.setItem("_all_local."+key,JSON.stringify(data))}function load_provinces(selectId,provinceId){if(get_all_provinces()){if(selectId){insertOptions(selectId,get_all_provinces(),"请选择省份");if(provinceId){$("#"+selectId).val(provinceId)}}}else{$get("rest/system/knowledge/region/provinces",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_all_provinces(data.data);if(selectId){insertOptions(selectId,get_all_provinces(),"请选择省份");if(provinceId){$("#"+selectId).val(provinceId)}}}}})}}function convert_gender(gender){if(gender==1){return"男"}else if(gender==2){return"女"}else{return""}}function convert_dict(type,id){var dicts=get_dictionary(type);if(dicts){for(var i=0;i<dicts.length;++i){var dict=dicts[i];if(dict.id==id){return dict}}}return null}function convert_province(id){var provinces=get_all_provinces();if(provinces){for(var i=0;i<provinces.length;++i){var province=provinces[i];if(province.id==id){return province}}}return null}function load_dictionary(type,selectId,dictId,prompt){if(get_dictionary(type)){if(selectId){init_select_option(selectId,get_dictionary(type),prompt);if(dictId){$("#"+selectId).val(dictId)}}}else{$get("rest/system/knowledge/dictionary/type/"+type,{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_dictionary(type,data.data);if(selectId){init_select_option(selectId,get_dictionary(type),prompt);if(dictId){$("#"+selectId).val(dictId)}}}}})}}function load_my_mandarin_cert(call){if(get_all_mandarin()){call(get_all_mandarin())}else{$get("rest/personal/center/mandarin/certs",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_all_mandarin(data.data);call(get_all_mandarin())}else{clear_all_mandarin();call(null)}}})}}function load_my_college_cert(call){if(get_all_college()){call(get_all_college())}else{$get("rest/personal/center/college/certs",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_all_college(data.data);call(get_all_college())}}})}}function load_my_degree_cert(call){if(get_all_degree()){call(get_all_degree())}else{$get("rest/personal/center/degrees",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_all_degree(data.data);call(get_all_degree())}}})}}function load_my_student(call){if(get_all_student()){call(get_all_student())}else{$get("rest/personal/center/students",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_all_student(data.data);call(get_all_student())}else{call(get_all_student())}}})}}function load_my_score(call){$get("rest/personal/center/scores",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_all_score(data.data);call(get_all_score())}}})}function load_all_province(selectId,currentId){if(get_all_provinces()){init_select_option(selectId,get_all_provinces(),"请选择省份");if(currentId){$("#"+selectId).val(currentId)}}else{$get("rest/system/knowledge/region/provinces",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_all_provinces(data.data);init_select_option(selectId,get_all_provinces(),"请选择省份");if(currentId){$("#"+selectId).val(currentId)}}}})}}function load_province_city(selectId,provinceId,currentId){$get("rest/system/knowledge/region/province/"+provinceId+"/cities",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_province_city(certificatePO.provinceId,data.data);init_select_option(selectId,data.data,"请选择地市");if(currentId){$("#"+selectId).val(currentId)}}}})}function load_all_nation(selectId,currentId,prompt){if(get_all_nation()){init_select_option(selectId,get_all_nation(),prompt,currentId)}else{$get("rest/system/knowledge/dictionary/types",{type:"nation",t:Date.parse(new Date)},{success:function(nationdata){if(nationdata.data&&nationdata.data.nation.length>0){set_all_nation(nationdata.data.nation);init_select_option(selectId,get_all_nation(),prompt,currentId)}}})}}function load_nation_by_province(selectId,currentId,prompt,provinceCode){if(get_all_nation()){insertNationOptions(selectId,get_all_nation(),prompt,currentId,provinceCode)}else{$get("rest/system/knowledge/dictionary/types",{type:"nation",t:Date.parse(new Date)},{success:function(nationdata){if(nationdata.data&&nationdata.data.nation.length>0){set_all_nation(nationdata.data.nation);insertNationOptions(selectId,get_all_nation(),prompt,currentId,provinceCode)}}})}}function load_province_nation(provinceCode,selectId,fnCurrent,prompt){if(get_all_nation()){insertProvinceNationOptions(provinceCode,selectId,get_all_nation(),prompt,fnCurrent)}else{$get("rest/system/knowledge/dictionary/types",{type:"nation",t:Date.parse(new Date)},{success:function(nationdata){if(nationdata.data&&nationdata.data.nation.length>0){set_all_nation(nationdata.data.nation);insertProvinceNationOptions(provinceCode,selectId,get_all_nation(),prompt,fnCurrent)}}})}}function load_all_cert_type(selectId,currentId){if(get_all_cert_type()){init_select_option(selectId,get_all_cert_type(),"请选择资格种类",currentId)}else{$get("rest/system/knowledge/cert/type/all",{t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){data=data.data;set_all_cert_type(data);init_select_option(selectId,get_all_cert_type(),"请选择资格种类",currentId)}}})}}function find_cert_type(id){if(!id){return null}var records=get_all_cert_type();if(!records){return null}for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==id){return record}}return null}function find_subject(provinceId,type,id){var records=get_all_subject(provinceId,type);if(!records){return null}for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==id){return record}}return null}function find_province(provinceId){var records=get_all_provinces();if(!records){return null}for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==provinceId){return record}}return null}function find_certificate_org(provinceId,cityId,type,level,orgId){var records=get_all_certificate_org(provinceId,cityId,type,level);if(!records){return null}for(var i=0,len=records.length;i<len;++i){var record=records[i];if(record.id==orgId){return record}}return null}function load_all_certificate_org(provinceId,cityId,type,level,selectId,currentId){$get("rest/system/knowledge/region/org/"+provinceId+"/"+cityId+"/"+type+"/"+level,{t:Date.parse(new Date)},{success:function(data){set_all_certificate_org(provinceId,cityId,type,level,data.data);init_select_option(selectId,data.data,"请选择认定机构",currentId)}})}function load_all_enroll_org(provinceId,cityId,selectId,currentId){$get("rest/system/knowledge/region/org/"+provinceId+"/"+cityId,{t:Date.parse(new Date)},{success:function(data){init_select_option(selectId,data.data,"请选择注册机构",currentId)}})}function load_all_subject(provinceId,type,selectId,currentId,certtype,types){if(get_all_subject(provinceId,type)){init_select_option(selectId,get_all_subject(provinceId,type),"请选择任教学科",currentId)}else{$get("rest/system/knowledge/subject",{province:provinceId,subjectType:certtype,type:types,t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){set_all_subject(provinceId,type,data.data);init_select_option(selectId,get_all_subject(provinceId,type),"请选择任教学科",currentId)}}})}}function load_all_subject_tree(provinceId,type,selectId,subject,subjectName){$get("rest/system/knowledge/subject",{province:provinceId,subjectType:type,type:1,t:Date.parse(new Date)},{success:function(data){if(data.data&&data.data.length>0){initTree(data.data)}}});if(subject){$("#rjxkName").html(subjectName);$("#rjxkId").val(subject)}else{$("#rjxkName").html("");$("#rjxkId").val("")}}function load_all_local_set(orgId,type,call){if(get_all_local(orgId,type)){call(get_all_local(orgId,type))}else{}}function init_select_option(selectId,data,init){var $select=$("#"+selectId);$select.find("option").remove();if(init){$select.append('<option selected="selected" value="-1">'+init+"</option>")}for(var i=0;i<data.length;++i){$select.append('<option  value="'+data[i].id+'">'+data[i].name+"</option>")}}function init_select_option(selectId,data,init,selected){var $select=$("#"+selectId);$select.find("option").remove();if(init){$select.append('<option selected="selected" value="-1">'+init+"</option>")}if(data){for(var i=0;i<data.length;++i){if(data[i].id==selected){$select.append('<option  selected="selected"  value="'+data[i].id+'">'+data[i].name+"</option>")}else{$select.append('<option  value="'+data[i].id+'">'+data[i].name+"</option>")}}}}function isPersonalOuterIdType(typeCode){if(typeCode=="7"||typeCode=="8"||typeCode=="9"){return true}return false}function isNeedSupplyPersonalInformation(){var teacher=JSON.parse(localStorage.teacher);if(!teacher.gender||!teacher.birthday||!teacher.nationId||isPersonalOuterIdType(teacher.idTypeCode)&&!teacher.outerIdCardNum){return true}return false}